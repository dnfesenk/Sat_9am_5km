<h2>Забег состоялся <%= @activity.date.strftime('%d.%m.%Y') %></h2>

<% if @activity.description.present? %>
  <h4>Краткий отчёт</h4>
  <p><%= @activity.description %></p>
<% end %>

<h4>Результаты</h4>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Место</th>
      <th>Участник</th>
      <th>Результат</th>
      <th class="hidden-on-phone">Клуб</th>
      <th class="hidden-on-phone">Пол</th>
    </tr>
  </thead>
  <tbody>
    <% @activity.results.includes(athlete: :club).order(:position).each do |result| %>
      <tr>
        <td class="position"><%= result.position %></td>
        <td>
          <% if result.athlete.present? %>
            <div>
              <%= link_to result.athlete&.name, athlete_path(result.athlete_id), class: 'athlete-link' %>
            </div>
            <div class="athlete-details fw-lighter">
              забегов <%= result.athlete.results.published.size %>
            </div>
          <% else %>
            <%= Athlete::NOBODY %>
          <% end %>
        </td>
        <td><%= human_result_time(result.total_time) %></td>
        <td class="hidden-on-phone"><%= result.athlete&.club&.name %></td>
        <td class="hidden-on-phone"><%= result.athlete&.gender %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="text-center">
  <%= link_to "Все забеги", activities_path %>
</div>

<h2>Волонтёры</h2>
<p>Забег не состоялся бы без помощи этих людей</p>
<table class="table">
  <thead>
    <tr>
      <th>Волонтёр</th>
      <th>Роль</th>
    </tr>
  </thead>
  <tbody>
    <% @activity.volunteers.includes(:athlete).each do |volunteer| %>
      <tr>
        <td><%= link_to volunteer.name, athlete_path(volunteer.athlete), class: 'athlete-link' %></td>
        <td><%= human_volunteer_role volunteer.role %></td>
      </tr>
    <% end %>
  </tbody>
</table>
